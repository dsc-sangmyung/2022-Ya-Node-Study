# 쿠키와 세션

## 쿠키?

- **쿠키**는 **서버**가 **클라이언트의 웹 브라우저에 저장하는 파일**입니다.  
- `Key`- `value` 쌍을 가집니다.  
- Key, value 외에도 **쿠키의 유효기간**과 관련된 `Expires`, `MaxAge` **보안**과 관련된 `Secure`, `HttpOnly`과 같은 값을 가집니다.
  - `Expires`: 언제까지 쿠키를 유지 시킬 것인지 ex) 2020-03-03
  - `MaxAge`: 얼마나 오랫동안 쿠키를 유지 시킬 것인지 (`MaxAge`를 **-1**로 설정하면 해당 쿠키를 삭제한다 ) ex) 1200초
  - `Expires`, `MaxAge`를 따로 지정해주지 않으면 해당 쿠키는 **세션쿠키**로 생성이 되며 세션 쿠키는 브라우저를 닫을 때 같이 삭제된다.
  - `Secure`: 이 값이 `true`면 HTTPS으로만 생성이 가능하다
  - `HttpOnly`: 이 값이 `true`면 자바스크립트나 css로 접근이 불가능하다
- 쿠키의 저장 위치

> `웹 브라우저` > `개발자 도구` > `Application` > `Storage` > `Cookies` 


- **1줄 요약**: **유저의 편의성 향상**이 주 목적으로 **클라이언트**가 가지고 있으며 서버에 요청을 할때마다 같이 실어서 보내는 파일


### 쿠키 사용 예시

- 로그인 상태 유지
- n일간 다시 보지 않기
- 장바구니

### 쿠키의 단점

- 클라이언트 측에 저장되는 파일이다보니 보안적으로 취약하다.
  - 수정, 삭제, 가로채기가 쉬움
  - 그래서 지워지거나 가로채지더라도 괜찮은 정보들을 주로 저장함.

## 세션?

- **쿠키의 보안성이 낮다는 단점을 보완**해주는 것이 세션이다.
- **서버의 메모리**나 **데이터베이스**에 저장된다.
- 사용자나 다른 유저에게 **유출되면 안되는 중요한 정보**들을 저장한다.

### 세션의 단점

- 서버에 저장되기 때문에 세션에 저장되는 정보가 많으면 많을수록 서버에 부담이 간다.

## 결론

### = 보안이 취약하지만 편리한 쿠키와 보안은 좋으나 서버에 무리가 가는 세션을 적재적소에 잘 사용하자



# `Path params` vs `Query params`

우리는 서버의 라우팅을 설계할 때 아래와 같은 기능을 두가지 방법으로 나타낼 수 있다.

> 작성자가 bob인 모든 게시글들을 조회한다

1. `Query Params`

   ```
   /posts?id=bob
   ```

2. `Path Params`

   ```text
   /posts/bob
   ```



여기서 1번과 같은 방식으로 데이터를 전송하는 것을 `query parameter` 2번을 `path parameter` 라고 한다.

이렇게 같은 기능을 두가지 형식으로 표현할 수 있는데 언제 어떤 형식을 사용해야 할까?  
그래서 api설계의 best practice를 찾아보았다. 정답부터 말하자면

> 어떤 리소스를 식별하고 싶다면 `Path Parameter`
>
> 정렬이나 필터링을 원한다면 `Query Parameter`

## 예시

- 아이디가 Jimmy인 유저를 가져온다. (특정 유저) => path params

```
[GET] /users/jimmy
```

- 직업이 프로그래머인 유저목록을 가져온다 (필터링) => query params

```
[GET] /users?job=programmer
```

- 게시글id값이 192인 게시글을 삭제한다. (특정 게시글) => path params

```
[DELETE] /posts/192
```

- 생성일을 기준으로 모든 유저목록을 불러온다. => query params

```
[GET] /users?sort=created_at
```

- 아이디가 jimmy인 유저의 게시글중(특정 유저) 에 카테고리가 게임인 게시글(필터링)을 불러온다.

```
[GET] /posts/jimmy?categori=game
```



